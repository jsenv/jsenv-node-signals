{"version":3,"file":"main.cjs","sources":["../../src/beforeExitSignal.js","../../src/deathSignal.js","../../src/exitSignal.js","../../src/hangupOrDeathSignal.js","../../src/interruptSignal.js","../../src/teardownSignal.js","../../src/internal/firstOperationMatching.js","../../src/unadvisedCrashSignal.js"],"sourcesContent":null,"names":["beforeExitCallbackArray","uninstall","addCallback","callback","length","install","filter","beforeExitCallback","onBeforeExit","reduce","previous","Promise","resolve","process","once","removeListener","beforeExitSignal","triggerDeath","deathSignal","collectExceptions","exitCallback","on","getExceptions","stop","trackExceptions","exceptionArray","map","exception","origin","unhandledRejectionCallback","unhandledRejection","promise","rejectionHandledCallback","uncaughtExceptionCallback","uncaughtException","exitSignal","triggerHangUpOrDeath","hangupOrDeathSignal","interruptSignal","eventRace","beforeExit","register","hangupOrDeath","death","exit","eventMap","unregisterMap","unregisterAll","reason","Object","keys","name","forEach","args","teardownSignal","firstOperationMatching","array","start","predicate","TypeError","createArrayErrorMessage","createStartErrorMessage","createPredicateErrorMessage","reject","visit","index","input","returnValue","then","output","recoverCallbackArray","recoverCallback","onUncaughtException","error","triggerUncaughtException","onUnhandledRejection","value","triggerUnhandledRejection","onRejectionHandled","recoverExceptionMatching","crash","type","isCrashing","crashReason","resolveRecovering","console","log","externalRecoverPromise","callbackRecoverPromise","recovered","recoverPromise","race","undefined","unadvisedCrashSignal"],"mappings":"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"}