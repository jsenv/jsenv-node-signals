{"version":3,"file":"main.cjs","sources":["../../src/SIGUPSignal.js","../../src/SIGINTSignal.js","../../src/SIGTERMSignal.js","../../src/beforeExitSignal.js","../../src/exitSignal.js","../../src/teardownSignal.js","../../src/internal/firstOperationMatching.js","../../src/unadvisedCrashSignal.js"],"sourcesContent":null,"names":["addCallback","callback","triggerHangUpOrDeath","process","once","removeListener","SIGUPSignal","SIGINTSignal","platform","console","warn","triggerTermination","SIGTERMSignal","beforeExitCallbackArray","uninstall","length","install","filter","beforeExitCallback","onBeforeExit","reduce","previous","Promise","resolve","beforeExitSignal","collectExceptions","exitCallback","on","getExceptions","stop","trackExceptions","exceptionArray","map","exception","origin","unhandledRejectionCallback","unhandledRejection","promise","rejectionHandledCallback","uncaughtExceptionCallback","uncaughtException","exitSignal","eventRace","SIGHUP","register","SIGINT","paltform","SIGTERM","beforeExit","exit","eventMap","unregisterMap","unregisterAll","reason","Object","keys","name","forEach","args","teardownSignal","firstOperationMatching","array","start","predicate","TypeError","createArrayErrorMessage","createStartErrorMessage","createPredicateErrorMessage","reject","visit","index","input","returnValue","then","output","recoverCallbackArray","recoverCallback","onUncaughtException","error","triggerUncaughtException","onUnhandledRejection","value","triggerUnhandledRejection","onRejectionHandled","recoverExceptionMatching","crash","type","isCrashing","crashReason","resolveRecovering","log","externalRecoverPromise","callbackRecoverPromise","recovered","recoverPromise","race","undefined","unadvisedCrashSignal"],"mappings":"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"}